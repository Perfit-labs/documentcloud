/*--------------------------------- forms ------------------------------------*/

@mixin label-decorative($font-size: 0.8rem) {
  font-size: $font-size;
  font-weight: $font-weight-bold;
  letter-spacing: 1px;
  text-transform: uppercase;
}

.form-columned {
  .form-control-label {
    @include label-decorative;
  }
}

.form-fancy {

  $fancy-input-top-padding:    1.5rem;
  $fancy-input-bottom-padding: $input-padding-y;
  $fancy-input-line-height:    1.5; // 1.25
  $fancy-input-height:         $fancy-input-top-padding + $fancy-input-line-height + $fancy-input-bottom-padding;

  .form-group {
    position: relative;

    .form-control {
      padding: $fancy-input-top-padding $input-padding-x $fancy-input-bottom-padding $input-padding-x;
    }

    .form-control-label {
      display: inline-block;
      position: absolute;
      width: 100%;
      padding-left: $input-padding-x;
      padding-right: $input-padding-x;
      @include untouchable;

      transform: translate3d(0, -($fancy-input-height - $fancy-input-line-height/2), 0);
      transition: transform $transition-speed-normal, color $transition-speed-normal;

      @include antialiased;
      @include label-decorative(0.75rem);
      line-height: $fancy-input-line-height;
      color: $gray;
      white-space: nowrap;
    }

    &.has-danger {
      .form-control-label {
        color: $brand-danger;
      }
    }

    &.has-success {
      .form-control-label {
        color: $brand-success;
      }
    }

  }

  .form-group.filled .form-control-label,
  .form-control:focus + .form-control-label {
    color: $gray-light;
    -webkit-transform: translate3d(0, -($fancy-input-height), 0);
            transform: translate3d(0, -($fancy-input-height), 0);
  }

  .has-danger.form-group.filled .form-control-label,
  .has-danger .form-control:focus + .form-control-label {
    color: $brand-danger;
  }

  .has-success.form-group.filled .form-control-label,
  .has-success .form-control:focus + .form-control-label {
    color: $brand-success;
  }

  .form-group-alert {
    font-weight: $font-weight-bold;
    font-size: 0.9rem;

    position: absolute;
    top: 100%;
    z-index: 1000;
    max-height: 0;
    overflow: hidden;
    width: 100%;

    -webkit-transition: opacity $transition-speed-normal, max-height $transition-speed-normal ease-out;
            transition: opacity $transition-speed-normal, max-height $transition-speed-normal ease-out;

    margin: -0.25rem 0 0 0;
    padding: 0 0.75rem;
    list-style-type: none;

    border-bottom-left-radius: 0.25rem;
    border-bottom-right-radius: 0.25rem;

    > li {
      margin: 0.5rem 0;
    }

    // These should work, but in testing they don't. TODO: Investigate
    //  .form-control:focus ~ & {
    //    max-height: 150px;
    //    -webkit-transition: opacity $transition-speed-normal, max-height $transition-speed-normal ease-in;
    //             transition: opacity $transition-speed-normal, max-height $transition-speed-normal ease-in;
    //  }
    //
    //  .has-danger & {
    //    @include white-on-($brand-danger);
    //  }

  }

  .form-control:focus ~ .form-group-alert {
    max-height: 150px;
  	-webkit-transition: opacity $transition-speed-normal, max-height $transition-speed-normal ease-in;
           	transition: opacity $transition-speed-normal, max-height $transition-speed-normal ease-in;
  }

  .has-danger .form-group-alert {
    @include white-on-($brand-danger);
  }

}
